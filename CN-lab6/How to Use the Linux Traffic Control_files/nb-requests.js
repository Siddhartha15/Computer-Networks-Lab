
// ** Created by Josh on 08/10/17 **

// ##################################################
// DOCUMENTATION
// ##################################################
//
// NOTES ABOUT THIS MODULE
// * self-invoking function
// * no function is called internally on load (everything is called from js/pages/<file.js>)
// * follows the JS module pattern
// * these "library" modules are *always* loaded
// 
// on load main() is called,
// > and then calls and returns moduleExport(), 
// > which contains the desired functions to export
//
// pretty simple module
// abstracts away some of the complexity of post/get requests
// > if we ever decide to not use jquery for this, this makes the change easier
// is also prevents jQuery/$ from being included in other modules - reducing the direct
// dependency on jquery
//
// DOCUMENTATION
// ##################################################


NB_MODULES.NbRequests = (function NbRequests(_, $, MODULES){
    'use strict';
    
    //******************************************************************************************************************************************
    //******************************************************************************************************************************************
    //******************************************************************************************************************************************
    // MODULES - IMPORTS ***********************************************************************************************************************
    //******************************************************************************************************************************************
    //******************************************************************************************************************************************
    //******************************************************************************************************************************************
    const { _deepFreeze } = MODULES.NbImmutable;
    
    
    
    //******************************************************************************************************************************************
    //******************************************************************************************************************************************
    //******************************************************************************************************************************************
    // LOGIC ***********************************************************************************************************************************
    //******************************************************************************************************************************************
    //******************************************************************************************************************************************
    
    function getRequest(urlEndpoint){
        return $.get(urlEndpoint);
    }
    
    
    function postRequest(urlEndpoint, requestData){ 
        console.info("post request", urlEndpoint, requestData);
        
        return $.post({
            url: urlEndpoint,
            data: requestData,
        });
    }
    
    

    
    
    
    
    //******************************************************************************************************************************************
    //******************************************************************************************************************************************
    //******************************************************************************************************************************************
    // MAIN AND EXPORTS ************************************************************************************************************************
    //******************************************************************************************************************************************
    //******************************************************************************************************************************************
    //******************************************************************************************************************************************
    function moduleExport(){
        return _deepFreeze({
            getRequest: getRequest,
            postRequest: postRequest,
        });
    }
    
    
    function main(){
        console.info("LOADING: nb-requests.js");
        return moduleExport();
    }
    return main();
    
    
    
    
}(  _,
    jQuery,
    NB_MODULES
));